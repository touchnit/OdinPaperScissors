<script>
    
let pSelection = ""
    
function getRandomInt(max) {
  return Math.floor(Math.random() * Math.floor(max));
}
    
function computerPlay() {
    let random = getRandomInt(3);
    let computerChoice = ["paper","scissors","rock"]
    return computerChoice[random]
    
}
    
    
function playRound(playerSelection, computerSelection) {
        
    let p1 = playerSelection.toLowerCase(),
        p2 = computerSelection.toLowerCase(),
        roundWinner;
    
    if (( p1 === p2) || (p1 === p2)){
            alert("Tied game")
    }
    else if ((p1 === 'rock' && p2 === 'paper' ) || (p1 === 'paper' && p2 === 'scissors') || (p1 == 'scissors' && p2 == 'rock')) {
            roundWinner = 'comp';
            alert("You loose... " + p2 + " beats " + p1)
            return roundWinner
        }
    else {
            roundWinner = 'play'
            alert("You win ! " + p1 + " beats " + p2)
            return roundWinner
    }

}
    
function promptPlayer(){
    let playerPrompt = "",
        isPromptValid;
        isPromptValid = playerPrompt === 'rock' || playerPrompt === 'scissor' || playerPrompt === 'paper';
        
    do
        {   
            playerPrompt = prompt("Choose rock, paper or scissor")
            isPromptValid = playerPrompt === 'rock' || playerPrompt === 'scissor' || playerPrompt === 'paper'
            if (!isPromptValid){ alert('You have to enter a valid value chosen between paper, rock, scissor') } else {}
            
        } while (!isPromptValid);
    
    playerPrompt = playerPrompt.toLowerCase()
    
    return playerPrompt

        
}    
    
function game()
{
    let score = 0,
        roundNumber = 0,
        playerScore = 0,
        computerScore = 0,
        roundResult,
        playerPrompt;
        
    
    for (let i=0; i < 5; i++){
        roundNumber = ++roundNumber
        pSelection = promptPlayer()
        cSelection = computerPlay()
        roundResult = playRound(pSelection,cSelection)
        
        if (roundResult === 'comp')
            {
               computerScore = computerScore + 1 
            } else if  (roundResult === 'play'){
                playerScore = playerScore + 1
            } else {}
                
        if (i<4){
            alert('Score is > Player : ' + playerScore + ' / Computer : ' + computerScore + ' ///// Next Round is round number ' + roundNumber + '. Ready ?')
        }
        else {
            alert('Game Final score > Player : ' + playerScore + ' / Computer : ' + computerScore )
    }
        
    }
}

game()

</script>